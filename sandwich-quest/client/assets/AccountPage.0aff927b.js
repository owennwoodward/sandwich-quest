var A=Object.defineProperty;var u=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var _=(o,t,s)=>t in o?A(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,f=(o,t)=>{for(var s in t||(t={}))w.call(t,s)&&_(o,s,t[s]);if(u)for(var s of u(t))S.call(t,s)&&_(o,s,t[s]);return o};import{l as k,g as q,B as T,H as I,c as r,a as m,o as i,b as l,d as e,t as Q,w as j,h as v,A as p,F as b,i as D,j as g,E as h,p as L,k as M,z as B}from"./vendor.92888ce4.js";import{_ as C,q as E,a as V,l as P,A as d,b as N,c as U,P as F,d as z}from"./index.903494ec.js";const H={name:"Account",setup(){const o=k(),t=q({});return T(()=>{t.value=f({},d.account)}),I(async()=>{try{await E.getMyQuestItems(),await V.getMyQuests(),await P.getUserCoordinates()}catch(s){console.error(s)}}),{router:o,edits:t,account:r(()=>d.account),quests:r(()=>d.quests.sort((s,a)=>new Date(a.createdAt)-new Date(s.createdAt))),questsItems:r(()=>d.questitems),goToQuestDetails(s){o.push({name:"QuestDetails",params:{id:s}})},async editAccount(){try{t.value._id=d.account.id,await N.editAccount(t.value)}catch(s){U.error(s),F.toast(s.message,"error")}},async logout(){z.logout({returnTo:window.location.origin})}}}},n=o=>(L("data-v-9e2f1530"),o=o(),M(),o),R={key:0,class:"container"},G={class:"d-flex justify-content-end pt-2"},J=B("Logout "),K=n(()=>e("i",{class:"mdi mdi-logout"},null,-1)),O=[J,K],W={class:"about text-center"},X=["src"],Y={class:"text-break"},Z=n(()=>e("button",{class:"btn btn-success",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasTop","aria-controls":"offcanvasTop"},"Edit Account",-1)),$={class:"offcanvas offcanvas-top bg-dark",tabindex:"-1",id:"offcanvasTop","aria-labelledby":"offcanvasTopLabel"},tt=n(()=>e("div",{class:"offcanvas-header"},[e("h5",{id:"offcanvasTopLabel"},"Edit Account"),e("i",{class:"mdi mdi-window-close btn-dark bg-dark text-reset selectable","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),et={class:"offcanvas-body"},st={class:"col-md-6 d-flex flex-column"},ot={class:"p-2 d-flex justify-content-around"},at=n(()=>e("label",{class:"ms-5",for:""},"Account name:",-1)),ct={class:"p-2 d-flex justify-content-around"},nt=n(()=>e("label",{class:"ms-5",for:""},"Account picture:",-1)),it=n(()=>e("button",{"data-bs-dismiss":"offcanvas","aria-label":"Save",class:"btn btn-primary mt-3"},"Save",-1)),dt=n(()=>e("h3",{class:"mt-4 py-2"},"My Quests:",-1));function rt(o,t,s,a,lt,ut){const y=m("Quest"),x=m("Login");return i(),l(b,null,[a.account.id?(i(),l("div",R,[e("div",G,[e("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(...c)=>a.logout&&a.logout(...c))},O)]),e("div",W,[e("img",{class:"rounded-pill p-3",src:a.account.picture,alt:""},null,8,X),e("div",Y,[e("h1",null,Q(a.account.name),1)]),Z,e("div",$,[tt,e("div",et,[e("form",{class:"d-flex flex-column align-items-center",action:"",onSubmit:t[3]||(t[3]=j((...c)=>a.editAccount&&a.editAccount(...c),["prevent"]))},[e("div",st,[e("div",ot,[at,v(e("input",{class:"me-5",type:"text","onUpdate:modelValue":t[1]||(t[1]=c=>a.edits.name=c)},null,512),[[p,a.edits.name]])]),e("div",ct,[nt,v(e("input",{class:"me-5",type:"text","onUpdate:modelValue":t[2]||(t[2]=c=>a.edits.picture=c)},null,512),[[p,a.edits.picture]])])]),it],32)])]),dt,(i(!0),l(b,null,D(a.quests,c=>(i(),h(y,{key:c.id,quest:c},null,8,["quest"]))),128))])])):g("",!0),a.account.id?g("",!0):(i(),h(x,{key:1}))],64)}var vt=C(H,[["render",rt],["__scopeId","data-v-9e2f1530"]]);export{vt as default};
